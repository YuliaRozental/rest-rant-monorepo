{"ast":null,"code":"var _jsxFileName = \"/Users/Yulia/nyu/Cyber/rest-rant-monorepo/frontend/src/places/PlaceDetails.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router\";\nimport CommentCard from './CommentCard';\nimport NewCommentForm from \"./NewCommentForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction PlaceDetails() {\n  _s();\n  const {\n    placeId\n  } = useParams();\n  const history = useHistory();\n  const [place, setPlace] = useState(null);\n  useEffect(() => {\n    const fetchData = async () => {\n      const response = await fetch(`http://localhost:5001/places/${placeId}`);\n      const resData = await response.json();\n      setPlace(resData);\n    };\n    fetchData();\n  }, [placeId]);\n  if (place === null) {\n    return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Loading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 10\n    }, this);\n  }\n  function editPlace() {\n    history.push(`/places/${place.placeId}/edit`);\n  }\n  async function deletePlace() {\n    await fetch(`http://localhost:5001/places/${place.placeId}`, {\n      method: 'DELETE'\n    });\n    history.push('/places');\n  }\n  async function deleteComment(deletedComment) {\n    await fetch(`http://localhost:5001/places/${place.placeId}/comments/${deletedComment.commentId}`, {\n      method: 'DELETE'\n    });\n    setPlace({\n      ...place,\n      comments: place.comments.filter(comment => comment.commentId !== deletedComment.commentId)\n    });\n  }\n  async function createComment(commentAttributes) {\n    const response = await fetch(`http://localhost:5001/places/${place.placeId}/comments`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(commentAttributes)\n    });\n    const comment = await response.json();\n    setPlace({\n      ...place,\n      comments: [...place.comments, comment]\n    });\n  }\n  let comments = /*#__PURE__*/_jsxDEV(\"h3\", {\n    className: \"inactive\",\n    children: \"No comments yet!\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 3\n  }, this);\n  let rating = /*#__PURE__*/_jsxDEV(\"h3\", {\n    className: \"inactive\",\n    children: \"Not yet rated\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 3\n  }, this);\n  if (place.comments.length) {\n    let sumRatings = place.comments.reduce((tot, c) => {\n      return tot + c.stars;\n    }, 0);\n    let averageRating = Math.round(sumRatings / place.comments.length);\n    let stars = '';\n    for (let i = 0; i < averageRating; i++) {\n      stars += '⭐️';\n    }\n    rating = /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [stars, \" stars\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 4\n    }, this);\n    comments = place.comments.map(comment => {\n      return /*#__PURE__*/_jsxDEV(CommentCard, {\n        comment: comment,\n        onDelete: () => deleteComment(comment)\n      }, comment.commentId, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 5\n      }, this);\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          style: {\n            maxWidth: 200\n          },\n          src: place.pic,\n          alt: place.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Located in \", place.city, \", \", place.state]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: place.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Rating\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 6\n        }, this), rating, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [place.name, \" has been serving \", place.city, \", \", place.state, \" since \", place.founded, \".\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Serving \", place.cuisines, \".\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"btn btn-warning\",\n          onClick: editPlace,\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 6\n        }, this), ` `, /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-danger\",\n          onClick: deletePlace,\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Comments\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: comments\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Got Your Own Rant or Rave?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(NewCommentForm, {\n      place: place,\n      onSubmit: createComment\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 3\n  }, this);\n}\n_s(PlaceDetails, \"1P7jTn0trDJyu9KmqVLCiKm/mS8=\", false, function () {\n  return [useParams, useHistory];\n});\n_c = PlaceDetails;\nexport default PlaceDetails;\nvar _c;\n$RefreshReg$(_c, \"PlaceDetails\");","map":{"version":3,"names":["useEffect","useState","useHistory","useParams","CommentCard","NewCommentForm","PlaceDetails","placeId","history","place","setPlace","fetchData","response","fetch","resData","json","editPlace","push","deletePlace","method","deleteComment","deletedComment","commentId","comments","filter","comment","createComment","commentAttributes","headers","body","JSON","stringify","rating","length","sumRatings","reduce","tot","c","stars","averageRating","Math","round","i","map","maxWidth","pic","name","city","state","founded","cuisines"],"sources":["/Users/Yulia/nyu/Cyber/rest-rant-monorepo/frontend/src/places/PlaceDetails.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router\"\nimport CommentCard from './CommentCard'\nimport NewCommentForm from \"./NewCommentForm\";\n\nfunction PlaceDetails() {\n\n\tconst { placeId } = useParams()\n\n\tconst history = useHistory()\n\n\tconst [place, setPlace] = useState(null)\n\n\tuseEffect(() => {\n\t\tconst fetchData = async () => {\n\t\t\tconst response = await fetch(`http://localhost:5001/places/${placeId}`)\n\t\t\tconst resData = await response.json()\n\t\t\tsetPlace(resData)\n\t\t}\n\t\tfetchData()\n\t}, [placeId])\n\n\tif (place === null) {\n\t\treturn <h1>Loading</h1>\n\t}\n\n\tfunction editPlace() {\n\t\thistory.push(`/places/${place.placeId}/edit`)\n\t}\n\n\tasync function deletePlace() {\n\t\tawait fetch(`http://localhost:5001/places/${place.placeId}`, {\n\t\t\tmethod: 'DELETE'\n\t\t})\n\t\thistory.push('/places')\n\t}\n\n\tasync function deleteComment(deletedComment) {\n\t\tawait fetch(`http://localhost:5001/places/${place.placeId}/comments/${deletedComment.commentId}`, {\n\t\t\tmethod: 'DELETE'\n\t\t})\n\n\t\tsetPlace({\n\t\t\t...place,\n\t\t\tcomments: place.comments\n\t\t\t\t.filter(comment => comment.commentId !== deletedComment.commentId)\n\t\t})\n\t}\n\n\tasync function createComment(commentAttributes) {\n\t\tconst response = await fetch(`http://localhost:5001/places/${place.placeId}/comments`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify(commentAttributes)\n\t\t})\n\n\t\tconst comment = await response.json()\n\n\t\tsetPlace({\n\t\t\t...place,\n\t\t\tcomments: [\n\t\t\t\t...place.comments,\n\t\t\t\tcomment\n\t\t\t]\n\t\t})\n\n\t}\n\n\n\n\tlet comments = (\n\t\t<h3 className=\"inactive\">\n\t\t\tNo comments yet!\n\t\t</h3>\n\t)\n\tlet rating = (\n\t\t<h3 className=\"inactive\">\n\t\t\tNot yet rated\n\t\t</h3>\n\t)\n\tif (place.comments.length) {\n\t\tlet sumRatings = place.comments.reduce((tot, c) => {\n\t\t\treturn tot + c.stars\n\t\t}, 0)\n\t\tlet averageRating = Math.round(sumRatings / place.comments.length)\n\t\tlet stars = ''\n\t\tfor (let i = 0; i < averageRating; i++) {\n\t\t\tstars += '⭐️'\n\t\t}\n\t\trating = (\n\t\t\t<h3>\n\t\t\t\t{stars} stars\n\t\t\t</h3>\n\t\t)\n\t\tcomments = place.comments.map(comment => {\n\t\t\treturn (\n\t\t\t\t<CommentCard key={comment.commentId} comment={comment} onDelete={() => deleteComment(comment)} />\n\t\t\t)\n\t\t})\n\t}\n\n\n\treturn (\n\t\t<main>\n\t\t\t<div className=\"row\">\n\t\t\t\t<div className=\"col-sm-6\">\n\t\t\t\t\t<img style={{ maxWidth: 200 }} src={place.pic} alt={place.name} />\n\t\t\t\t\t<h3>\n\t\t\t\t\t\tLocated in {place.city}, {place.state}\n\t\t\t\t\t</h3>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col-sm-6\">\n\t\t\t\t\t<h1>{place.name}</h1>\n\t\t\t\t\t<h2>\n\t\t\t\t\t\tRating\n\t\t\t\t\t</h2>\n\t\t\t\t\t{rating}\n\t\t\t\t\t<br />\n\t\t\t\t\t<h2>\n\t\t\t\t\t\tDescription\n\t\t\t\t\t</h2>\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t{place.name} has been serving {place.city}, {place.state} since {place.founded}.\n\t\t\t\t\t</h3>\n\t\t\t\t\t<h4>\n\t\t\t\t\t\tServing {place.cuisines}.\n\t\t\t\t\t</h4>\n\t\t\t\t\t<br />\n\t\t\t\t\t<a className=\"btn btn-warning\" onClick={editPlace}>\n\t\t\t\t\t\tEdit\n\t\t\t\t\t</a>{` `}\n\t\t\t\t\t<button type=\"submit\" className=\"btn btn-danger\" onClick={deletePlace}>\n\t\t\t\t\t\tDelete\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<hr />\n\t\t\t<h2>Comments</h2>\n\t\t\t<div className=\"row\">\n\t\t\t\t{comments}\n\t\t\t</div>\n\t\t\t<hr />\n\t\t\t<h2>Got Your Own Rant or Rave?</h2>\n\t\t\t<NewCommentForm\n\t\t\t\tplace={place}\n\t\t\t\tonSubmit={createComment}\n\t\t\t/>\n\t\t</main>\n\t)\n}\n\nexport default PlaceDetails"],"mappings":"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"},"metadata":{},"sourceType":"module"}